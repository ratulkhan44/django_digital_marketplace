{% extends "base.html" %}
{% load static %}
{% block head_title %}
Digital Marketplace
{% endblock head_title %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'books:book_list' %}">Book List</a></li>
<li class="breadcrumb-item"><a href="{{ exercise.chapter.book.get_absolute_url }}">{{exercise.chapter.book.title}}</a>
</li>
<li class="breadcrumb-item"><a href="{{ exercise.chapter.get_absolute_url }}">{{exercise.chapter.title}}</a>
</li>
<li class="breadcrumb-item active" aria-current="page">{{exercise.title}}</li>
{% endblock breadcrumb %}

{% block content %}
<div class="row">
    <main class="col-md-4">
        <div class="card">
            <div class="card-header">{{exercise.chapter.book.title}}</div>
            <img src="{{exercise.chapter.book.cover.url}}" class="card-img-top">
            <div class="card-body">
                <p class="card-text">Published: {{exercise.chapter.book.publication_date}}</p>
            </div>
        </div>
    </main>
    <aside class="col-md-8">
        <div class="card">
            <div class="card-header">
                Solution:
            </div>
            {% if exercise.chapter.book in request.user.userlibrary.book_list %}

            {% for solution in exercise.solution_set.all %}

            <div class="accordion" id="solution-{{solution.solution_number}}">
                <div class="card">
                    <div class="card-header" id="heading-{{solution.solution_number}}">
                        <h2 class="mb-0">
                            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                data-target="#collapse-{{solution.solution_number}}" aria-expanded="true"
                                aria-controls="collapse-{{solution.solution_number}}">
                                Solution-{{solution.solution_number}}
                            </button>
                        </h2>
                    </div>


                    <div id="collapse-{{solution.solution_number}}" class="collapse" aria-labelledby="heading-{{solution.solution_number}"
                            data-parent="#solution-{{solution.solution_number}}">
                        <div class="card-body">
                            <img src="{{solution.image.url}}" class="card-img-top" alt="">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% else %}
            <div class="text-center">
                <h5>You do not access to this book. <a href="#">Purchase this book</a> </h5>
                <img src="{% static 'images/lock.png' %}" alt="">
            </div>
            {% endif %}
        </div>
    </aside>
</div>
{% endblock content %}